{% extends 'admin.html.twig' %}

{% set pagetitle = 'Dashboard'|trans %}
{% block title pagetitle %}

{% block content %}
	{#  
	<div class="row">
		<div class="col-xl-3 col-lg-6 col-md-12 col-12">
			<div class="card mb-4">
				<div class="card-body">
					<div class="d-flex align-items-center justify-content-between mb-3 lh-1">
						<div>
							<span class="fs-6 text-uppercase fw-semibold ls-md">{{ "User creators"|trans }}</span>
						</div>
						<div>
							<span class="bi bi-person-check fs-3 text-primary"></span>
						</div>
					</div>
					<h2 class="fw-bold mb-1">{{ setting.getUsers({"role": "creator", "count": true, "isVerified": true}).getQuery().getSingleScalarResult() }}</h2>
					<span class="text-success fw-semibold">
						<i class="bi bi-graph-up-arrow me-1"></i>
						+{{ setting.getUsers({"role": "creator", "count": true, "isVerified": true}).getQuery().getSingleScalarResult() }}
					</span>
					<span class="ms-1 fw-medium">{{ "Active creators"|trans }}</span>
				</div>
			</div>
		</div>
		<div class="col-xl-3 col-lg-6 col-md-12 col-12">
			<div class="card mb-4">
				<div class="card-body">
					<div class="d-flex align-items-center justify-content-between mb-3 lh-1">
						<div>
							<span class="fs-6 text-uppercase fw-semibold ls-md">{{ "User restauranters"|trans }}</span>
						</div>
						<div>
							<span class="bi bi-person-slash fs-3 text-primary"></span>
						</div>
					</div>
					<h2 class="fw-bold mb-1">{{ setting.getUsers({"role": "restaurant", "count": true, "isVerified": true}).getQuery().getSingleScalarResult() }}</h2>
					<span class="text-danger fw-semibold">
						<i class="bi bi-graph-down-arrow me-1"></i>
						+{{ setting.getUsers({"role": "restaurant", "count": true, "isVerified": true}).getQuery().getSingleScalarResult() }}
					</span>
					<span class="ms-1 fw-medium">{{ "Active restauranters"|trans }}</span>
				</div>
			</div>
		</div>
		<div class="col-xl-3 col-lg-6 col-md-12 col-12">
			<div class="card mb-4">
				<div class="card-body">
					<div class="d-flex align-items-center justify-content-between mb-3 lh-1">
						<div>
							<span class="fs-6 text-uppercase fw-semibold ls-md">{{ "Points of sale"|trans }}</span>
						</div>
						<div>
							<span class="bi bi-printer fs-3 text-primary"></span>
						</div>
					</div>
					<h2 class="fw-bold mb-1">{{ setting.getUsers({"role": "creator", "count": true, "isVerified": "all"}).getQuery().getSingleScalarResult() }}</h2>
					<span class="text-success fw-semibold">
						<i class="bi bi-graph-up-arrow me-1"></i>
						+{{ setting.getUsers({"role": "pointofsale", "count": true, "isVerified": "all"}).getQuery().getSingleScalarResult() }}
					</span>
					<span class="ms-1 fw-medium">{{ "Points of sale"|trans }}</span>
				</div>
			</div>
		</div>
		<div class="col-xl-3 col-lg-6 col-md-12 col-12">
			<div class="card mb-4">
				<div class="card-body">
					<div class="d-flex align-items-center justify-content-between mb-3 lh-1">
						<div>
							<span class="fs-6 text-uppercase fw-semibold ls-md">{{ "Scanners"|trans }}</span>
						</div>
						<div>
							<span class="bi bi-qr-code-scan fs-3 text-primary"></span>
						</div>
					</div>
					<h2 class="fw-bold mb-1">{{ setting.getUsers({"role": "creator", "count": true, "isVerified": "all"}).getQuery().getSingleScalarResult() }}</h2>
					<span class="text-success fw-semibold">
						<i class="bi bi-graph-up-arrow me-1"></i>
						+{{ setting.getUsers({"role": "scanner", "count": true, "isVerified": "all"}).getQuery().getSingleScalarResult() }}
					</span>
					<span class="ms-1 fw-medium">{{ "Scanners"|trans }}</span>
				</div>
			</div>
		</div>
	</div>
	#}


	<div class="row">
		<div class="col-md-6 col-xl-3 col-12">
			<div class="card mb-4">
				<div class="card-body">
					<div class="d-flex align-items-center justify-content-between mb-3 lh-1">
						<div>
							<span class="fs-6 text-uppercase fw-semibold ls-md">{{ "User creators"|trans }}</span>
						</div>
						<div>
							<span class="bi bi-person-check fs-3 text-primary"></span>
						</div>
					</div>
					<div class="text-center my-4">
						<h1 class="display-3 text-primary mb-0 fw-bold">
							{{ setting.getUsers({"role": "creator", "count": true, "isVerified": true}).getQuery().getSingleScalarResult() }}
						</h1>
						<p class="mb-0">{{ "Active creators"|trans }}</p>
					</div>
				</div>
			</div>
		</div>
		<div class="col-md-6 col-xl-3 col-12">
			<div class="card mb-4">
				<div class="card-body">
					<div class="d-flex align-items-center justify-content-between mb-3 lh-1">
						<div>
							<span class="fs-6 text-uppercase fw-semibold ls-md">{{ "User restauranters"|trans }}</span>
						</div>
						<div>
							<span class="bi bi-person-vcard fs-3 text-primary"></span>
						</div>
					</div>
					<div class="text-center my-4">
						<h1 class="display-3 text-info mb-0 fw-bold">
							{{ setting.getUsers({"role": "restaurant", "count": true, "isVerified": true}).getQuery().getSingleScalarResult() }}
						</h1>
						<p class="mb-0">{{ "Active restauranters"|trans }}</p>
					</div>
				</div>
			</div>
		</div>
		<div class="col-md-6 col-xl-3 col-12">
			<div class="card mb-4">
				<div class="card-body">
					<div class="d-flex align-items-center justify-content-between mb-3 lh-1">
						<div>
							<span class="fs-6 text-uppercase fw-semibold ls-md">{{ "Points of sale"|trans }}</span>
						</div>
						<div>
							<span class="bi bi-printer fs-3 text-primary"></span>
						</div>
					</div>
					<div class="text-center my-4">
						<h1 class="display-3 text-success mb-0 fw-bold">
							{{ dump(setting.getUsers({"role": "pointofsale", "count": true, "isVerified": "all"}).getQuery().getSingleScalarResult()) }}
						</h1>
						<p class="mb-0">{{ "Points of sale"|trans }}</p>
					</div>
				</div>
			</div>
		</div>
		<div class="col-md-6 col-xl-3 col-12">
			<div class="card mb-4">
				<div class="card-body">
					<div class="d-flex align-items-center justify-content-between mb-3 lh-1">
						<div>
							<span class="fs-6 text-uppercase fw-semibold ls-md">{{ "Scanners"|trans }}</span>
						</div>
						<div>
							<span class="bi bi-qr-code-scan fs-3 text-primary"></span>
						</div>
					</div>
					<div class="text-center my-4">
						<h1 class="display-3 text-danger mb-0 fw-bold">
							{{ dump(setting.getUsers({"role": "scanner", "count": true, "isVerified": "all"}).getQuery().getSingleScalarResult()) }}
						</h1>
						<p class="mb-0">{{ "Scanners"|trans }}</p>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="row">
		{% set rows = setting.getUsers({"isVerified": "all", "limit": 3}).getQuery().getResult() %}
		{% if rows | length > 0 %}
			<div class="col-xl-6 col-lg-12 col-md-12 col-12 mb-4">
				<div class="card h-100">
					<div class="card-header d-flex align-items-center justify-content-between card-header-height">
						<h4 class="mb-0">{{ 'Users summary'|trans }}</h4>
						<a href="{{ path('dashboard_admin_user_index') }}" class="btn btn-outline-secondary btn-sm">
							{{ 'Manage users'|trans }}
						</a>
					</div>
					<div class="card-body">
						{% include "dashboard/admin/user/manage-users-table.html.twig" with {rows: rows} %}
					</div>
				</div>
			</div>
		{% endif %}
		{% set testimonials = setting.getTestimonials({"isOnline": "all", "limit": 3}).getQuery().getResult() %}
		{% if testimonials | length > 0 %}
			<div class="col-xl-6 col-lg-12 col-md-12 col-12 mb-4">
				<div class="card h-100">
					<div class="card-header d-flex align-items-center justify-content-between card-header-height">
						<h4 class="mb-0">{{ 'Testimonials summary'|trans }}</h4>
						<a href="{{ path('dashboard_admin_testimonial_index') }}" class="btn btn-outline-secondary btn-sm">
							{{ 'Manage testimonials'|trans }}
						</a>
					</div>
					<div class="card-body">
						{% include "dashboard/admin/testimonials/manage-testimonials-table.html.twig" with {testimonials: testimonials} %}
					</div>
				</div>
			</div>
		{% endif %}
	</div>

	<div class="row">
		<div class="col-lg-12 col-md-12 col-12 mb-2">
			<div class="d-lg-flex align-items-center justify-content-between">
				<h4 class="mb-0">{{ "Recipes summary"|trans }}</h4>
				<a href="{{ path('dashboard_admin_recipe_index') }}" class="btn btn-outline-secondary btn-sm">
					{{ "Manage recipes"|trans }}
				</a>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-md-6 col-xl-3 col-12">
			<div class="card mb-4">
				<div class="card-body">
					<div class="d-flex align-items-center justify-content-between mb-3 lh-1">
						<div>
							<span class="fs-6 text-uppercase fw-semibold ls-md">{{ "Recipes added"|trans }}</span>
						</div>
						<div>
							<span class="bi bi-calendar fs-3 text-primary"></span>
						</div>
					</div>
					<div class="text-center my-4">
						<h1 class="display-3 text-primary mb-0 fw-bold">
							{{ setting.getRecipes({"count": true, "isOnline": "all", "elapsed": "all"}).getQuery().getSingleScalarResult() }}
						</h1>
					</div>
				</div>
			</div>
		</div>
		<div class="col-md-6 col-xl-3 col-12">
			<div class="card mb-4">
				<div class="card-body">
					<div class="d-flex align-items-center justify-content-between mb-3 lh-1">
						<div>
							<span class="fs-6 text-uppercase fw-semibold ls-md">{{ "Published recipes"|trans }}</span>
						</div>
						<div>
							<span class="bi bi-calendar fs-3 text-primary"></span>
						</div>
					</div>
					<div class="text-center my-4">
						<h1 class="display-3 text-info mb-0 fw-bold">
							{{ setting.getRecipes({"count": true, "isOnline": true, "elapsed": "all"}).getQuery().getSingleScalarResult() }}
						</h1>
					</div>
				</div>
			</div>
		</div>
		<div class="col-md-6 col-xl-3 col-12">
			<div class="card mb-4">
				<div class="card-body">
					<div class="d-flex align-items-center justify-content-between mb-3 lh-1">
						<div>
							<span class="fs-6 text-uppercase fw-semibold ls-md">{{ "Upcoming recipes"|trans }}</span>
						</div>
						<div>
							<span class="bi bi-calendar fs-3 text-primary"></span>
						</div>
					</div>
					<div class="text-center my-4">
						<h1 class="display-3 text-success mb-0 fw-bold">
							{{ setting.getRecipes({"count": true, "isOnline": true, "elapsed": false}).getQuery().getSingleScalarResult() }}
						</h1>
					</div>
				</div>
			</div>
		</div>
		<div class="col-md-6 col-xl-3 col-12">
			<div class="card mb-4">
				<div class="card-body">
					<div class="d-flex align-items-center justify-content-between mb-3 lh-1">
						<div>
							<span class="fs-6 text-uppercase fw-semibold ls-md">{{ "Recipe dates"|trans }}</span>
						</div>
						<div>
							<span class="bi bi-calendar fs-3 text-primary"></span>
						</div>
					</div>
					<div class="text-center my-4">
						<h1 class="display-3 text-danger mb-0 fw-bold">
							{{ setting.getRecipeDates({"count": true}).getQuery().getSingleScalarResult() }}
						</h1>
					</div>
				</div>
			</div>
		</div>
	</div>
	{# {% set recipes = setting.getRecipes({"isOnline": "all", "elapsed": "all", "limit": 3}).getQuery().getResult() %} #}
	{% if recipes | length > 0 %}
		<div class="row">
			<div class="col-xl-6 col-lg-12 col-md-12 col-12 mb-4">
				<div class="card">
					{% include "dashboard/shared/recipes/manage-recipes-table.html.twig" with {rows: recipes} %}
				</div>
			</div>
		</div>
	{% endif %}

	<div class="row">
		<div class="col-xl-4 col-lg-12 col-md-12 col-12 mb-4">
			<div class="card h-100">
				<div class="card-header d-flex align-items-center justify-content-between card-header-height">
					<h4 class="mb-0">{{ 'Subscriptions'|trans }}</h4>
					<a href="#" class="btn btn-outline-secondary btn-sm">{{ 'Manage subscriptions'|trans }}</a>
				</div>
				<div class="card-body">
					<ul class="nav nav-pills mb-3" id="pills-tab" role="tablist">
						<li class="nav-item">
							<a class="nav-link active" id="pills-daily-tab" data-bs-toggle="pill" href="#pills-daily" role="tab" aria-controls="pills-daily" aria-selected="true">{{ 'Last 30 days'|trans }}</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" id="pills-monthly-tab" data-bs-toggle="pill" href="#pills-monthly" role="tab" aria-controls="pills-monthly" aria-selected="false">{{ 'Last 24 months'|trans }}</a>
						</li>
					</ul>
					<div class="tab-content" id="pills-tabContent">
						<div class="tab-pane fade show active" id="pills-daily" role="tabpanel" aria-labelledby="pills-daily-tab">
							<line-chart id="daily" points="{{ days | json_encode }}" x="date" y="amount"></line-chart>
							<div id="daily" points="{{ days | json_encode }}" x="date" y="amount" class="apex-charts"></div>
						</div>
						<div class="tab-pane fade" id="pills-monthly" role="tabpanel" aria-labelledby="pills-monthly-tab">
							<line-chart id="monthly" points="{{ months | json_encode }}" x="date" y="amount" hidden></line-chart>
							<div id="monthly" points="{{ months | json_encode }}" x="date" y="amount" hidden class="apex-charts"></div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="col-xl-4 col-lg-12 col-md-12 col-12 mb-4">
			<div class="card h-100">
				<div class="card-header d-flex align-items-center justify-content-between card-header-height">
					<h4 class="mb-0">{{ 'Test emails'|trans }}</h4>
					<a href="https://www.mail-tester.com/" rel="noreferrer" target="_blank" class="btn btn-outline-secondary btn-sm">
						{{ 'Send'|trans }}
					</a>
				</div>
				<div class="card-body">
					<form action="{{ path('dashboard_admin_testmail') }}" method="post" class="row">
						<div class="mb-3 col-12 col-md-12">
							<input name="email" class="form-control" placeholder="{{ 'Email'|trans }}">
						</div>
						<div class="col-12">
							<button type="submit" class="btn btn-primary">
								{{ 'Send'|trans }}
							</button>
						</div>
					</form>
				</div>
			</div>
		</div>
		<div class="col-xl-4 col-lg-12 col-md-12 col-12 mb-4">
			<div class="card h-100">
				<div class="card-header d-flex align-items-center justify-content-between card-header-height">
					<h4 class="mb-0">{{ 'Notify'|trans }}</h4>
					<a href="#" class="btn btn-outline-secondary btn-sm">{{ 'Manage notifications'|trans }}</a>
				</div>
				<div class="card-body">

				</div>
			</div>
		</div>
	</div>

	<div class="row">
		{% if revises is not empty %}
			<div class="col-xl-6 col-lg-12 col-md-12 col-12 mb-4">
				<div class="card h-100">
					<div class="card-header d-flex align-items-center justify-content-between card-header-height">
						<h4 class="mb-0">{{ 'Revisions summary'|trans }}</h4>
						<a href="#" class="btn btn-outline-secondary btn-sm">{{ 'Manage revisions'|trans }}</a>
					</div>
					<div class="card-body">
						<div class="table-responsive overflow-y-hidden">
							<table class="table mb-0 text-nowrap table-hover table-centered">
								<thead class="">
									<tr>
										<th>{{ 'Article'|trans}}</th>
										<th>{{ 'Author'|trans }}</th>
										<th></th>
									</tr>
								</thead>
								<tbody>
									{% for revise in revises %}
										{% set link = path('dashboard_admin_revise_edit', { id : revise.id }) %}
										<tr>
											<td>
												<a href="{{ link }}" target="_blank" class="text-inherit">
													<div class="d-flex align-items-center">
														<div>
															<img src="{{ revise.target.imageName ? asset(revise.target.getImagePath) : revise.target.getImagePlaceholder }}" alt="{{ revise.target.title }}" class="img-4by3-lg rounded">
														</div>
														<div class="ms-3">
															<h4 class="mb-1 text-primary-hover">
																{{ revise.target.title }}
															</h4>
															<span>
																{{ 'Published the'|trans }}
																{{ revise.createdAt | format_date('long') }}
															</span>
														</div>
													</div>
												</a>
											</td>
											<td>
												<div class="d-flex align-items-center">
													{% include "global/user-avatar.html.twig" with { user: revise.author, type: "xs", class: "me-2" } %}
													<h5 class="mb-0">{{ revise.author.getFullName | lower | capitalize }}</h5>
												</div>
											</td>
											<td>
												<div class="dropdown dropstart">
													<a class="btn-icon btn btn-ghost btn-sm rounded-circle" href="#" role="button" id="Dropdown1" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
														<i class="bi bi-three-dots-vertical"></i>
													</a>
													<div class="dropdown-menu" aria-labelledby="Dropdown1" style="">
														<span class="dropdown-header">{{ 'Settings'|trans }}</span>
														<a class="dropdown-item" href="{{ link }}">
															<i class="bi bi-pencil dropdown-item-icon"></i>
															{{ 'Edit'|trans }}
														</a>
													</div>
												</div>
											</td>
										</tr>
									{% endfor %}
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</div>
		{% endif %}
		{#  
		{% if recipes is not empty %}
			<div class="col-xl-4 col-lg-12 col-md-12 col-12 mb-4">
				<div class="card h-100">
					<div class="card-header d-flex align-items-center justify-content-between card-header-height">
						<h4 class="mb-0">{{ 'Recipes summary'|trans }}</h4>
						<a href="{{ path('dashboard_admin_recipe_index') }}" class="btn btn-outline-secondary btn-sm">
							{{ 'Manage recipes'|trans }}
						</a>
					</div>
					<div class="card-body">
						<ul class="list-group list-group-flush">
							{% for recipe in recipes %}
								{% set link = path('dashboard_admin_recipe_edit', { id : recipe.id }) %}
								<li class="list-group-item px-0 {{ loop.first ? 'pt-0' }}">
									<div class="row">
										<div class="col-md-3 col-12 mb-3 mb-md-0">
											<a href="{{ link }}">
												<img src="{{ recipe.imageName ? asset(recipe.getImagePath) : recipe.getImagePlaceholder }}" alt="{{ recipe.title }}" class="img-fluid rounded">
											</a>
										</div>
										<div class="col-md-8 col-10">
											<a href="{{ link }}">
												<h5 class="text-primary-hover">{{ recipe.title }}</h5>
											</a>
											<div class="d-flex align-items-center">
												{% include "global/user-avatar.html.twig" with { user: app.user, type: "xs", class: "me-2" } %}
												<span class="fs-6">User</span>
											</div>
										</div>
										<div class="col-1 col-auto d-flex justify-content-center">
											<span class="dropdown dropstart">
												<a class="btn-icon btn btn-ghost btn-sm rounded-circle" href="#" role="button" id="Dropdown1" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
													<i class="bi bi-three-dots-vertical"></i>
												</a>
												<div class="dropdown-menu" aria-labelledby="Dropdown1" style="">
													<span class="dropdown-header">{{ 'Settings'|trans }}</span>
													<a class="dropdown-item" href="{{ link }}">
														<i class="bi bi-pencil dropdown-item-icon"></i>
														{{ 'Edit'|trans }}
													</a>
													<a href="#" onclick="event.preventDefault(); confirm('{{ "Are you sure you want to delete this item?"|trans }}') && document.getElementById('js-recipe-delete-form').submit();" class="dropdown-item">
														<i class="bi bi-trash dropdown-item-icon"></i>
														{{ 'Delete'|trans }}
													</a>
													<form id="js-recipe-delete-form" action="{{ path('dashboard_admin_recipe_delete', {slug: recipe.slug}) }}" method="post" class="">
														<input type="hidden" name="_token" value="{{ csrf_token('recipe_deletion_' ~ recipe.slug) }}">
														<input type="hidden" name="_method" value="DELETE">
													</form> 
												</div>
											</span>
										</div>
									</div>
								</li>
							{% endfor %}
						</ul>
					</div>
				</div>
			</div>
		{% endif %}
		#}
		{% if reports is not empty %}
			<div class="col-xl-6 col-lg-12 col-md-12 col-12 mb-4">
				<div class="card h-100">
					<div class="card-header card-header-height d-flex align-items-center">
						<h4 class="mb-0">{{ 'Reports summary'|trans }}</h4>
					</div>
					<div class="card-body">
						<ul class="list-group list-group-flush list-timeline-activity">
							{% for report in reports %}
								<li class="list-group-item px-0 pt-0 border-0 mb-2">
									<div class="row">
										<div class="col-auto">
											<div class="avatar avatar-md avatar-indicators avatar-online">
												<img alt="avatar" src="{{ asset('images/avatar/avatar-1.jpg') }}" class="rounded-circle">
											</div>
										</div>
										<div class="col ms-n2">
											<h4 class="mb-0 h5">
												<strong>
													<i class="bi bi-person me-2"></i> {{ report.author.username }}
												</strong> {{ 'reported'|trans }}
												<strong>
													<a href="{{ path('dashboard_admin_user_index', {q: report.target.author.id}) }}">
														<i class="bi bi-person me-2"></i> {{ report.target.author.username }}
													</a>
												</strong> {{ 'on'|trans }}
												<a href="{{ path(report.target) }}">
													{{ report.recipe ? report.recipe.title : report.review.recipe.title }}
												</a>
											</h4>
											<p class="mb-1">{{ report.reason }}</p>
											<span class="fs-6">
												{{ report.createdAt ? report.createdAt | ago }}
											</span>
										</div>
									</div>
								</li>
							{% endfor %}
						</ul>
					</div>
				</div>
			</div>
		{% endif %}
	</div>

	<div class="row">
		<div class="col-lg-12 col-md-12 col-12 mb-2">
			<div class="d-lg-flex align-items-center justify-content-between">
				<h4 class="mb-0">{{ "Orders summary"|trans }}</h4>
				<a href="{{ path('dashboard_admin_orders') }}" class="btn btn-outline-secondary btn-sm">
					{{ "Manage orders"|trans }}
				</a>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-md-6 col-xl-3 col-12">
			<div class="card mb-4">
				<div class="card-body">
					<div class="d-flex align-items-center justify-content-between mb-3 lh-1">
						<div>
							<span class="fs-6 text-uppercase fw-semibold ls-md">{{ "Orders placed"|trans }}</span>
						</div>
						<div>
							<span class="bi bi-cart fs-3 text-primary"></span>
						</div>
					</div>
					<div class="text-center my-4">
						<h1 class="display-3 text-primary mb-0 fw-bold">
							{{ setting.getOrders({"count": true, "status": "all"}).getQuery().getSingleScalarResult() }}
						</h1>
					</div>
				</div>
			</div>
		</div>
		<div class="col-md-6 col-xl-3 col-12">
			<div class="card mb-4">
				<div class="card-body">
					<div class="d-flex align-items-center justify-content-between mb-3 lh-1">
						<div>
							<span class="fs-6 text-uppercase fw-semibold ls-md">{{ "Paid orders"|trans }}</span>
						</div>
						<div>
							<span class="bi bi-cart fs-3 text-primary"></span>
						</div>
					</div>
					<div class="text-center my-4">
						<h1 class="display-3 text-info mb-0 fw-bold">
							{{ setting.getOrders({"count": true, "status": 1}).getQuery().getSingleScalarResult() }}
						</h1>
					</div>
				</div>
			</div>
		</div>
		<div class="col-md-6 col-xl-3 col-12">
			<div class="card mb-4">
				<div class="card-body">
					<div class="d-flex align-items-center justify-content-between mb-3 lh-1">
						<div>
							<span class="fs-6 text-uppercase fw-semibold ls-md">{{ "Awaiting payment"|trans }}</span>
						</div>
						<div>
							<span class="bi bi-cart fs-3 text-primary"></span>
						</div>
					</div>
					<div class="text-center my-4">
						<h1 class="display-3 text-success mb-0 fw-bold">
							{{ setting.getOrders({"count": true, "status": 0}).getQuery().getSingleScalarResult() }}
						</h1>
					</div>
				</div>
			</div>
		</div>
		<div class="col-md-6 col-xl-3 col-12">
			<div class="card mb-4">
				<div class="card-body">
					<div class="d-flex align-items-center justify-content-between mb-3 lh-1">
						<div>
							<span class="fs-6 text-uppercase fw-semibold ls-md">{{ "Subscriptions sold"|trans }}</span>
						</div>
						<div>
							<span class="bi bi-ticket fs-3 text-primary"></span>
						</div>
					</div>
					<div class="text-center my-4">
						<h1 class="display-3 text-danger mb-0 fw-bold">
							{% set subscriptionsSold = setting.getOrders({"sumOrderElements": true, "status": 1}).getQuery().getSingleScalarResult() %}
							{{ subscriptionsSold ? subscriptionsSold : 0 }}
						</h1>
					</div>
				</div>
			</div>
		</div>
	</div>
	{% set rows = setting.getOrders({"status": "all", "limit": 3}).getQuery().getResult() %}
	{% if rows | length > 0 %}
		<div class="row mb-5">
			<div class="col-12">
				<div id="subscriptionsSalesByDateLineChart"></div>
			</div>
		</div>
		<div class="row">
			<div class="col-lg-12 col-md-12 col-12 mb-4">
				<div class="card">
					{% include "dashboard/shared/order/manage-orders-table.html.twig" with {rows: rows, header: false} %}
				</div>
			</div>
		</div>
	{% endif %}
{% endblock %}

{% block javascripts %}
	{{ parent() }}
	<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
	<script type="text/javascript">
		{{ gc_language(app.request.locale) }}
		{% if subscriptionsSalesByDateLineChart is not null %}
			{{ gc_draw(subscriptionsSalesByDateLineChart, 'subscriptionsSalesByDateLineChart') }}
		{% endif %}
	</script>
{% endblock %}
