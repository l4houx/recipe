{% extends 'dashboard.html.twig' %}

{% set pagetitle = 'Add your review for %recipetitle%'|trans({'%recipetitle%': recipe.title}) %}
{% block title pagetitle %}

{% block breadcrumb %}
	{% set breadcrumb = [{ "recipes": ('Recipes'|trans), "current":(pagetitle) }] %}
	{% include "global/breadcrumb.html.twig" with breadcrumb %}
{% endblock %}

{% block content %}
	<div class="card mb-4">
		<div class="card-header">
			<h3 class="mb-0">{{ pagetitle }}</h3>
			<p class="mb-0">{{ ''|trans }}</p>
		</div>
		<div class="card-body">
			<div class="row mt-6">
				<div class="col-md-12 mb-8">
					<div class="d-md-flex justify-content-between align-items-center">
						<div>
                            {% set runtimeConfig = {"scale": {"dim": [150, 150] }} %}
                            <img class="rounded img-4by3-lg" src="{{ recipe.getImagePath | imagine_filter('scale', runtimeConfig) }}">
							<h2 class="mb-0">{{ 'Company Reviews'|trans }}
								<span class=" ms-2 fs-5 fw-normal">based on 11.7kReviews</span>
							</h2>
						</div>
						<div class="mt-3">
							<a href="{{ path('recipe', { slug: recipe.slug }) }}" class="btn btn-outline-primary">
								{{ recipe.title }}
							</a>
						</div>
					</div>
				</div>
				<div class="col-lg-12 col-md-12 col-12">
					<div class="mb-4 mb-lg-0">
						<h2 class="h3 mb-6">{{ 'Overall Rating'|trans }}</h2>
						<div class="row align-items-center">
							<div class="col-md-5 text-md-center mb-4 mb-md-0">
								<h3 class="display-2 fw-bold">{{ recipe.getRatingAvg }} {{"out of 5 stars"|trans|lower}}</h3>
								<div class="rating-wrap fs-6">
									<ul class="rating-stars">
										<li style="width:{{ recipe.getRatingPercentage }}%" class="stars-active">
											<i class="bi bi-star-fill"></i>
											<i class="bi bi-star-fill"></i>
											<i class="bi bi-star-fill"></i>
											<i class="bi bi-star-fill"></i>
											<i class="bi bi-star-fill"></i>
										</li>
										<li>
											<i class="bi bi-star-fill"></i>
											<i class="bi bi-star-fill"></i>
											<i class="bi bi-star-fill"></i>
											<i class="bi bi-star-fill"></i>
											<i class="bi bi-star-fill"></i>
										</li>
									</ul>
									<div class="label-rating mb-0 fs-6">
										{{ recipe.getRatingAvg }}
										{{ "out of 5 stars"|trans|lower }}
									</div>
								</div>
							</div>
							<div class="col-lg-7 col-md-7">
								<div class="d-flex align-items-center mb-2">
									<div class="text-nowrap me-3">
										<span class="d-inline-block align-middle me-1">
											{{ "5 stars"|trans }}
										</span>
										<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" class="bi bi-star-fill" viewbox="0 0 16 16">
											<path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"></path>
										</svg>
									</div>
									<div class="w-100">
										<div class="progress" style="height: 6px;">
											<div class="progress-bar bg-warning" role="progressbar" style="width: {{ recipe.getRatingsPercentageForRating(5) }}%;" aria-valuenow="{{ recipe.getRatingsPercentageForRating(5) }}" aria-valuemin="0" aria-valuemax="{{ recipe.getRatingsPercentageForRating(5) }}"></div>
										</div>
									</div>
									<span class="ms-3">{{ recipe.getRatingsPercentageForRating(5) }}%</span>
								</div>
								<div class="d-flex align-items-center mb-2">
									<div class="text-nowrap me-3">
										<span class="d-inline-block align-middle me-1">
											{{ "4 stars"|trans }}
										</span>
										<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" class="bi bi-star-fill" viewbox="0 0 16 16">
											<path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"></path>
										</svg>
									</div>
									<div class="w-100">
										<div class="progress" style="height: 6px;">
											<div class="progress-bar bg-warning" role="progressbar" style="width: {{ recipe.getRatingsPercentageForRating(4) }}%;" aria-valuenow="{{ recipe.getRatingsPercentageForRating(4) }}" aria-valuemin="0" aria-valuemax="{{ recipe.getRatingsPercentageForRating(4) }}">
											</div>
										</div>
									</div>
									<span class="ms-3">{{ recipe.getRatingsPercentageForRating(4) }}%</span>
								</div>
								<div class="d-flex align-items-center mb-2">
									<div class="text-nowrap me-3">
										<span class="d-inline-block align-middle me-1">
											{{ "3 stars"|trans }}
										</span>
										<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" class="bi bi-star-fill" viewbox="0 0 16 16">
											<path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"></path>
										</svg>
									</div>
									<div class="w-100">
										<div class="progress" style="height: 6px;">
											<div class="progress-bar bg-warning" role="progressbar" style="width: {{ recipe.getRatingsPercentageForRating(3) }}%;" aria-valuenow="{{ recipe.getRatingsPercentageForRating(3) }}" aria-valuemin="0" aria-valuemax="{{ recipe.getRatingsPercentageForRating(3) }}">
											</div>
										</div>
									</div>
									<span class="ms-3">{{ recipe.getRatingsPercentageForRating(3) }}%</span>
								</div>
								<div class="d-flex align-items-center mb-2">
									<div class="text-nowrap me-3">
										<span class="d-inline-block align-middle me-1">
											{{ "2 stars"|trans }}
										</span>
										<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" class="bi bi-star-fill" viewbox="0 0 16 16">
											<path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"></path>
										</svg>
									</div>
									<div class="w-100">
										<div class="progress" style="height: 6px;">
											<div class="progress-bar bg-warning" role="progressbar" style="width: {{ recipe.getRatingsPercentageForRating(2) }}%;" aria-valuenow="{{ recipe.getRatingsPercentageForRating(2) }}" aria-valuemin="0" aria-valuemax="{{ recipe.getRatingsPercentageForRating(2) }}"></div>
										</div>
									</div>
									<span class="ms-3">{{ recipe.getRatingsPercentageForRating(2) }}%</span>
								</div>
								<div class="d-flex align-items-center mb-2">
									<div class="text-nowrap me-3">
										<span class="d-inline-block align-middle me-1">
											{{ "1 star"|trans }}
										</span>
										<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor" class="bi bi-star-fill" viewbox="0 0 16 16">
											<path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"></path>
										</svg>
									</div>
									<div class="w-100">
										<div class="progress" style="height: 6px;">
											<div class="progress-bar bg-warning" role="progressbar" style="width: {{ recipe.getRatingsPercentageForRating(1) }}%;" aria-valuenow="{{ recipe.getRatingsPercentageForRating(1) }}" aria-valuemin="0" aria-valuemax="{{ recipe.getRatingsPercentageForRating(1) }}"></div>
										</div>
									</div>
									<span class="ms-3">{{ recipe.getRatingsPercentageForRating(1) }}%</span>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<hr class="my-5">
			<div>
				{% include "global/message.html.twig" with { type: "info", icon: "bi bi-exclamation-circle", message: ("The fields preceded with a red * are mandatory"|trans), class: "my-6" } %}
				{{ form_start(form, {'attr': {'novalidate': 'novalidate', 'class': 'row gx-3 needs-validation'} }) }}
				{{ form_widget(form._token) }}
				{{ form_errors(form) }}
				{{ form_widget(form) }}
				<div class="col-12">
					<button type="submit" class="btn btn-primary">{{ 'Create'|trans }}</button>
				</div>
				{{ form_end(form, {'render_rest': false}) }}
			</div>
		</div>
	</div>
{% endblock %}
