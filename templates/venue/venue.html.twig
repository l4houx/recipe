{% extends 'page.html.twig' %}

{% set venue_comments_enabled = settings["venue_comments_enabled"] %}
{% set pagetitle = venue.name %}
{% block title pagetitle %}

{% block breadcrumb %}
	{% set breadcrumb = [{ "venues" : ("Venues"|trans), "current":(pagetitle) }] %}
	{% include "global/breadcrumb.html.twig" with breadcrumb %}
{% endblock %}

{% block content %}
	<section class="p-lg-5 py-7">
		<div class="container">
			{% if venue.images | length > 0 %}
				<div class="row">
					<div class="col-lg-12 col-md-12 col-12 mb-5">
						<div id="carouselVenueIndicators" class="carousel slide" data-bs-ride="carousel">
							<ol class="carousel-indicators">
								{% for iteration in 1..venue.images | length %}
									<li data-bs-target="#carouselVenueIndicators" data-bs-slide-to="{{ iteration - 1 }}" {{ (loop.first ) ?'class="active" aria-current="true"' : '' }}></li>
								{% endfor %}
							</ol>
							<div class="carousel-inner">
								{% for image in venue.images %}
									<div class="carousel-item {{ (loop.first ) ? 'active' : '' }}">
										<img src="{{ asset(image.getImagePath) }}" class="d-block w-100 " alt="{{ venue.name }}">
									</div>
								{% endfor %}
							</div>
							<a class="carousel-control-prev" href="#carouselVenueIndicators" role="button"
								data-bs-slide="prev">
								<span class="carousel-control-prev-icon" aria-hidden="true"></span>
								<span class="visually-hidden">{{ "Previous"|trans }}</span>
							</a>
							<a class="carousel-control-next" href="#carouselVenueIndicators" role="button"
								data-bs-slide="next">
								<span class="carousel-control-next-icon" aria-hidden="true"></span>
								<span class="visually-hidden">{{ "Next"|trans }}</span>
							</a>
						</div>
					</div>
				</div>
			{% endif %}
			<div class="row">
				<div class="{% if venue.isQuoteform and venue.contactemail %}col-xl-8{% endif %} col-lg-12 col-md-12 col-12 mb-4 mb-xl-0">
					<div class="card mb-5">
						<div class="card-body">
							<div class="d-flex justify-content-between align-items-center">
								<h1 class="fw-semibold mb-2">{{ venue.name }}</h1>
								<div class="text-inherit mb-2">{{ venue.type.name }}</div>
							</div>
							{#  
							<div class="d-flex mb-5 lh-1">
								<span class="fs-6 align-top me-1">
									<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor"
										class="bi bi-star-fill text-warning" viewBox="0 0 16 16">
										<path
											d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z">
										</path>
									</svg>
									<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor"
										class="bi bi-star-fill text-warning" viewBox="0 0 16 16">
										<path
											d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z">
										</path>
									</svg>
									<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor"
										class="bi bi-star-fill text-warning" viewBox="0 0 16 16">
										<path
											d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z">
										</path>
									</svg>
									<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor"
										class="bi bi-star-fill text-warning" viewBox="0 0 16 16">
										<path
											d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z">
										</path>
									</svg>
									<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" fill="currentColor"
										class="bi bi-star-half text-warning" viewBox="0 0 16 16">
										<path
											d="M5.354 5.119 7.538.792A.516.516 0 0 1 8 .5c.183 0 .366.097.465.292l2.184 4.327 4.898.696A.537.537 0 0 1 16 6.32a.548.548 0 0 1-.17.445l-3.523 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256a.52.52 0 0 1-.146.05c-.342.06-.668-.254-.6-.642l.83-4.73L.173 6.765a.55.55 0 0 1-.172-.403.58.58 0 0 1 .085-.302.513.513 0 0 1 .37-.245l4.898-.696zM8 12.027a.5.5 0 0 1 .232.056l3.686 1.894-.694-3.957a.565.565 0 0 1 .162-.505l2.907-2.77-4.052-.576a.525.525 0 0 1-.393-.288L8.001 2.223 8 2.226v9.8z">
										</path>
									</svg>
								</span>
								<span class="fw-medium">(140)</span>
								<span class="ms-4 d-none d-md-block">
									<svg width="16" height="16" viewBox="0 0 16 16" fill="none"
										xmlns="http://www.w3.org/2000/svg">
										<rect x="3" y="8" width="2" height="6" rx="1" fill="#754FFE"></rect>
										<rect x="7" y="5" width="2" height="9" rx="1" fill="#754FFE"></rect>
										<rect x="11" y="2" width="2" height="12" rx="1" fill="#DBD8E9"></rect>
									</svg>
									<span>Intermediate</span>
								</span>
								<span class="ms-4 d-none d-md-block">
									<svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" fill="currentColor"
										class="bi bi-people" viewBox="0 0 16 16">
										<path
											d="M15 14s1 0 1-1-1-4-5-4-5 3-5 4 1 1 1 1h8Zm-7.978-1A.261.261 0 0 1 7 12.996c.001-.264.167-1.03.76-1.72C8.312 10.629 9.282 10 11 10c1.717 0 2.687.63 3.24 1.276.593.69.758 1.457.76 1.72l-.008.002a.274.274 0 0 1-.014.002H7.022ZM11 7a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm3-2a3 3 0 1 1-6 0 3 3 0 0 1 6 0ZM6.936 9.28a5.88 5.88 0 0 0-1.23-.247A7.35 7.35 0 0 0 5 9c-4 0-5 3-5 4 0 .667.333 1 1 1h4.216A2.238 2.238 0 0 1 5 13c0-1.01.377-2.042 1.09-2.904.243-.294.526-.569.846-.816ZM4.92 10A5.493 5.493 0 0 0 4 13H1c0-.26.164-1.03.76-1.724.545-.636 1.492-1.256 3.16-1.275ZM1.5 5.5a3 3 0 1 1 6 0 3 3 0 0 1-6 0Zm3-2a2 2 0 1 0 0 4 2 2 0 0 0 0-4Z">
										</path>
									</svg>
									<span>Enrolled</span>
								</span>
							</div>
							<div class="d-flex justify-content-between">
								<div class="d-flex align-items-center">
									<img src="{{ asset('images/user/default.png') }}" class="rounded-circle avatar-md"
										alt="avatar">
									<div class="ms-2 lh-1">
										<h4 class="mb-1">Kathryn Jones</h4>
										<p class="fs-6 mb-0">@kathrynjones</p>
									</div>
								</div>
								<div>
									<a href="#" class="btn btn-outline-secondary btn-sm">Follow</a>
								</div>
							</div>
							#}
						</div>
						<ul class="nav nav-lt-tab" id="tab" role="tablist">
							<li class="nav-item" role="presentation">
								<a class="nav-link active" id="description-tab" data-bs-toggle="pill" href="#description"
									role="tab" aria-controls="description" aria-selected="true">
									{{ "Description"|trans }}
								</a>
							</li>
							<li class="nav-item" role="presentation">
								<a class="nav-link" id="review-tab" data-bs-toggle="pill" href="#location" role="tab"
									aria-controls="location" aria-selected="false" tabindex="-1">
									{{ "Location"|trans }}
								</a>
							</li>
							{% if '0' != settings["venue_comments_enabled"] %}
								<li class="nav-item" role="presentation">
									<a class="nav-link" id="comment-tab" data-bs-toggle="pill" href="#comment" role="tab"
										aria-controls="comment" aria-selected="false" tabindex="-1">
										{{ "Comment"|trans }}
									</a>
								</li>
							{% endif %}
						</ul>
					</div>
					<div class="card rounded-3">
						<div class="card-body">
							<div class="tab-content" id="tabContent">
								<div class="tab-pane fade show active" id="description" role="tabpanel"
									aria-labelledby="description-tab">
									{% if venue.description %}
										<div class="mb-4">
											<h3 class="mb-2">{{ "The space"|trans }}</h3>
											<p>{{ venue.description | raw | nl2br }}</p>
										</div>
									{% endif %}
									{% if venue.pricing %}
										<div class="mb-4">
											<h3 class="mb-2">{{ "Pricing"|trans }}</h3>
											<p>{{ venue.pricing | raw | nl2br }}</p>
										</div>
									{% endif %}
									{% if venue.availibility %}
										<div class="mb-4">
											<h3 class="mb-2">{{ "Availability"|trans }}</h3>
											<p>{{ venue.availibility | raw | nl2br }}</p>
										</div>
									{% endif %}
									{#  
									{% if venue.foodbeverage %}
										<div class="mb-4">
											<h3 class="mb-2">{{ "Food and beverage"|trans }}</h3>
											<p>{{ venue.foodbeverage | raw | nl2br }}</p>
										</div>
									{% endif %}
									#}
									{% if venue.amenities | length > 0 %}
										<h4 class="mb-3">{{ "Amenities"|trans }}</h4>
										<div class="row g-2 mb-3">
											{% for amenity in venue.amenities %}
												<div class="col-12 col-md-3">
													<div>
														<span>
															<i class="{{ amenity.icon }} align-text-bottom text-success"></i>
														</span>
														<span class="ms-1">{{ amenity.name }}</span>
													</div>
												</div>
											{% endfor %}
										</div>
									{% endif %}
								</div>
								<div class="tab-pane fade" id="location" role="tabpanel" aria-labelledby="location-tab">
									<div class="mb-4">
										<h3 class="mb-2">{{ "Location"|trans }}</h3>
										{% if venue.isShowmap %}
											<iframe height="500" class="w-100 border-0 venue-map" src="{{ setting.getCurrentRequestProtocol() }}://maps.google.com/maps?q={{ venue.name | url_encode ~ '%20' ~ venue.stringifyAddress|url_encode }}&t=&z=13&ie=UTF8&iwloc=&output=embed"></iframe>
										{% endif %}
									</div>
									<div class="mb-4">
										<h3 class="mb-2">{{ "Address"|trans }}</h3>
										<p>{{ venue.stringifyAddress }}</p>
									</div>
									<div class="mb-4">
										<h3 class="mb-2">{{ "Guests"|trans }}</h3>
										<p>Add Code Here</p>
									</div>
									{% if venue.neighborhoods %}
										<div class="mb-4">
											<h3 class="mb-2">{{ "Neighborhoods"|trans }}</h3>
											<p>{{ venue.neighborhoods | raw | nl2br }}</p>
										</div>
									{% endif %}
								</div>
								{% if '0' != settings["venue_comments_enabled"] %}
									<div class="tab-pane fade" id="comment" role="tabpanel" aria-labelledby="comment-tab">
										<div>
											{% if is_granted('IS_AUTHENTICATED_FULLY') %}
												<div class="mb-4">
													<div class="card border border-0">
														<div class="card-body p-5">
															{{ render(controller('App\\Controller\\VenueCommentController::form', {'id': venue.id})) }}
														</div>
													</div>
												</div>
											{% else %}
												<div class="d-flex justify-content-between align-items-center mb-5">
													<div>
														<span class="ms-2">{{ 'To publish a comment'|trans }}</span>
														<a href="{{ path('login', {'redirect_to': app.request.pathInfo}) }}" class="fs-5 fw-semibold mb-4 text-primary">{{ 'Sign in'|trans }}</a>
													</div>
												</div>
											{% endif %}
											<div class="mb-4">
												<div class="d-lg-flex align-items-center justify-content-between mb-5">
													<div class="mb-3 mb-lg-0">
														<h3 class="mb-0">
															{{ comments.getTotalItemCount }} {{ comments.getTotalItemCount > 1 ? "comments"|trans : "comment"|trans }}
														</h3>
													</div>
													<div></div>
												</div>
												{% if comments.getTotalItemCount > 0 %}
													{% for comment in comments %}
														{% if comment.parent == null %}
															{% include 'global/comment.html.twig' %}
														{% endif %}
													{% endfor %}
													{{ knp_pagination_render(comments, null, {}, {'align': 'center'}) }}
												{% else %}
													{% include "global/message.html.twig" with { type: "dark", message: ('Be the first to comment on this article.'|trans), icon: "bi bi-exclamation-circle", class: "my-2" } %}
												{% endif %}
											</div>
										</div>
									</div>
								{% endif %}
							</div>
						</div>
					</div>
				</div>
				{% if venue.isQuoteform and venue.contactemail %}
					<div class="col-xl-4 col-lg-12 col-md-12 col-12">
						<div class="card mb-4 ">
							<div class="card-header">
								<h4 class="mb-0">{{ "Request a quote"|trans }}</h4>
							</div>
							<div class="card-body">
								{{ form_start(form, {'attr': {'novalidate': 'novalidate'} }) }}
									{{ form_widget(form) }}
								{{ form_end(form) }}
							</div>
						</div>
					</div>
				{% endif %}
			</div>
		</div>
	</section>
{% endblock %}
